# NOTE: This package uses internal tools. It should not be made open-source.

package(default_visibility = ["//:__subpackages__"])

# Google owns the copyright
licenses(["unencumbered"])

integration_package = "//transpiler/javatests/com/google/j2cl/transpiler/integration"

integration_test_names = [
    "abstractinnerclass",
    "alllongoperations",
    "anonymousclasswithcaptures",
    "argumentimplicitcasts",
    "arithmeticexception",
    "arithmeticexceptiondisabled",
    "arithmeticexceptiondisabledresultused",
    "arrayboundsgwtstyle",
    "arraybranchinsertion",
    "arraycastsinglesideeffect",
    "arrayleafinsertion",
    "arrayliteral",
    "arrayobjectcalls",
    "arrayofboxedtype",
    "arrayreadwrite",
    "assertsimple",
    "backwardbridgemethod",
    "binaryexpressions",
    "blockscoping",
    "boxingsideeffect",
    "breakstatement",
    "bridgejsmethod",
    "bridgemethodaccidentaloverride",
    "bridgemethodbasic",
    "bridgemethodmultipleoverrides",
    "bridgemethods",
    "cascadedstaticinit",
    "castdevirtualizedtypes",
    "castnull",
    "casttoarray",
    "casttoboxedtype",
    "casttoclass",
    "casttoclassdisabled",
    "casttoclassdisabledresultused",
    "casttogenerics",
    "casttointerface",
    "casttonativetypevariable",
    "casttoprimitives",
    "casttoreference",
    "castwithsideeffect",
    "circularcompiletimeconstant",
    "classliteral",
    "compiletimeconstant",
    "complexcascadingconstructor",
    "continuestatement",
    "cyclicclinits",
    "defaultinitvalue",
    "depsdeep",
    "depsforwarding",
    "depsshallow",
    "devirtualizedsupermethodcall",
    "dowhilestatement",
    "emptyclass",
    "emptyclasswithfields",
    "emptyclasswithparent",
    "enums",
    "enumspecialfunctions",
    "exceptionnotcaught",
    "exports",
    "externalunqualifiedstaticfield",
    "fieldmethodclasscollision",
    "finallyblock",
    "foreachstatement",
    "forstatement",
    "genericinterfaceabstractimpl",
    "genericmethod",
    "genericnativetype",
    "generictype",
    "ifstatement",
    "implementsgenericinterface",
    "implementsinterface",
    "implementsinterfacesamename",
    "implicitparenthesis",
    "importglobaljstypes",
    "importinnerclass",
    "importsfullyqualified",
    "inlineinstancefieldinit",
    "innerclassinheritance",
    "innerclassinitorder",
    "instancecompiletimeconstant",
    "instanceinitorder",
    "instanceinnerclass",
    "instancejsmethods",
    "instanceofarray",
    "instanceofboxedtype",
    "instanceofclass",
    "instanceofinterface",
    "instancequalifieronstaticfield",
    "interfaceabstractimpl",
    "interfacedevirtualize",
    "interfacejsbridge",
    "interfacemethoddispatch",
    "interfacewithfields",
    "iteratormethodresolution",
    "jsbridgebackward",
    "jsbridgemethodaccidentaloverride",
    "jsbridgemultipleaccidental",
    "jsbridgemultipleexposing",
    "jsconstructor",
    "jsfunctionbridge",
    "jsfunctiontypeannotation",
    "jsinteroptests",
    "jsmethodoverride",
    "jsoverlay",
    "jsoverlaystaticrefs",
    "jsoverlaywithjsfunction",
    "jsproperties",
    "jstypevarargs",
    "labeledstatement",
    "lambdas",
    "lambdasnestedscope",
    "lambdaswithgenerics",
    "localclasswithcaptures",
    "longimplicitcasts",
    "longoperationsinglesideeffect",
    "multipleabstractparents",
    "multipleanonymousclass",
    "multiplecatch",
    "multipleconstructors",
    "multipleroottypes",
    "narrowingprimitiveconversion",
    "nativeinjection",
    "nativejstypes",
    "nestedanonymousclass",
    "nestedgenericclass",
    "nestedtrycatch",
    "newinnerclasswithsameouter",
    "nobridgemethods",
    "numberchilddevirtualcalls",
    "numberdevirtualcalls",
    "numberobjectcalls",
    "objectchilddevirtualcalls",
    "objectdevirtualcalls",
    "obviouslydeadcode",
    "overloadedmethods",
    "overridingclassmethods",
    "overridinginterfacemethods",
    "overwrittentypevariables",
    "packagecrosscall",
    "packageprivatemethods",
    "parallelhierarchies",
    "privatecrosscall",
    "protectedcrosscall",
    "removeunusedcontructorprops",
    "renamejsmethodsinnativejstype",
    "returnimplicitcasts",
    "shadowedfield",
    "simpleautoboxing",
    "simplecascadingconstructor",
    "simpleliterals",
    "simplestarrayliteral",
    "srcjar",
    "staticblocklocalvar",
    "staticcompiletimeconstant",
    "staticfieldcollision",
    "staticfieldinitializer",
    "staticfields",
    "staticinitorder",
    "staticjsmethods",
    "staticnestedclass",
    "strictequality",
    "stringconversion",
    "stringdevirtualcalls",
    "stringescapecodes",
    "subclassgenericclass",
    "subnativejstype",
    "supercallnondefault",
    "supermethodcall",
    "switchstatement",
    "synchronizedblock",
    "systemgetproperty",
    "ternaryexpression",
    "trywithresource",
    "typewildcards",
    "unaryexpressions",
    "underflowoverflowconversion",
    "unusedmultiexpressionreturn",
    "varargs",
    "variablecollisions",
    "whilestatement",
    "wideningandboxing",
    "wideningprimitiveconversion",
]

java_test(
    name = "J2clJavaScriptSizeTest",
    srcs = ["J2clJavaScriptSizeTest.java"],
    args = ["--nooutputredirect"],
    data = ["%s/%s:optimized_js" % (integration_package, f) for f in integration_test_names],
    shard_count = 1,
    deps = [
        "//java/com/google/ads/testing/testmetricsrecorder",
        "//java/com/google/common/collect",
        "//java/com/google/testing/javascript:size_helper",
        "//java/com/google/testing/util",
        "//third_party/java/junit",
    ],
)
